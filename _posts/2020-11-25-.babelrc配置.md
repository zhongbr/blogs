---
title: '.babelrc配置详解'
tags: ['前端','webpack']
---

# Babelrc配置



将es6的js代码转换成浏览器可以执行的代码，是下一代JavaScript语法的编译器。将大部分的JavaScript新标准的方法编译成兼容绝大多数主流浏览器的代码。

".babelrc"文件是在工程项目中配合webpack打包压缩时使用的配置文件。

## Babel转译器

对**预设**和**插件**进行配置，不同的转译器作用于不同的配置项目：

- 语法转译器，对JavaScript最新的语法糖进行编译，不负责新增的api和全局对象。

  1. babel-preset-env
  2. bebel-preset-es2015
  3. babel-preset-es2016
  4. babel-preset-es2017
  5. babel-preset-latest

  > ```javascript
  > {
  >   "presets": [
  >     ["env", /*options*/ {
  >       "targets":{
  >         "chrome":52,
  >         "browsers":["last 2 versions", "safari 7"],
  >         "node": "6.10"
  >       },
  >       modules: false
  >     }]
  >   ]
  > }
  > ```
  >
  > options可以用于一些配置一些其它的内容，例如可以通过targets字段配置目标浏览器， modules可以指定一些js的代码规范，常配置成false
  >
  > 1. CommonJS
  > 2. amd
  > 3. umd
  > 4. systemjs

- 补丁转译器，负责转移JavaScript新增的api和全局对象

- jsx和flow插件，转义jsx语法和移除类型声明，使用React时将用到它

## Babel插件

搭配bebel相应的插件进行配置，可以解决单个的需求。

常用的babel插件:

1. transform-runtime

   解决全局对象或者全局对象方法编译不足的情况。只会对es6的语法进行转换，不会对新的api进行转换。转换新的api可以使用babel-polyfill配置

2. babel-plugin-syntax-dynamic-import

   解决动态引入模块的问题，在preset中使用了"stage-2"时，可以不用该插件。

   配置该插件后，js可以支持动态引入模块，否则在动态引入模块的时候可能会抛出的错误

   ```
   Module build failed: SyntaxError: 'import' and 'export' may only appear at the top level
   ```

## 其他配置

### ignore

指定不编译的代码

```javascript
{
  "ignore": [
    "./path/to/xxx.js"
  ]
}
```

### minified

设置编译后是否压缩，Boolean类型

### env

设置环境变量



## 例子

### Vue项目的.babelrc配置

```json
{
  "presets":[
    ["env", {
      "modules": false
    }],
    "stage-2"
  ],
  "comments": false,
  "plugins":[
    "transform-runtime"
  ]
}
```



### React项目的.babelrc配置

```json
{
  "presets":[
    ["env", {
      "modules":false
    }],
    "stage-2",
    "react"
  ],
  "plugins": ["transform-runtime"],
  "comments":false
}
```



## 兼容性

Babel默认只转换新的JavaScript语法，不转换新的api，以及Promise、Set等全局对象，可以通过使用transform-runtime和babel-polyfill配合使用即可。

